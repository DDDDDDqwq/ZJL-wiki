<div id="__comments_script"></div>
<script>
  var lstCommentsTheme = '';
  var update = function () {
    var comments = document.createElement('script');
    var commentsTheme = document.body.dataset.mdColorScheme === 'slate' ? 'dark' : 'light';
    if (lstCommentsTheme === commentsTheme) return;

    Object.entries({
      async: true,
      id: '__comments_script',
      src: "https://giscus.app/client.js",
      crossOrigin: "anonymous",
      "data-repo": "ZJL-wiki/gitment",
      "data-repo-id": "R_kgDON30vtw=",
      "data-category": "{% if config.theme.language == 'zh' %}评论{% else %}Comments{% endif %}",
      "data-category-id": "{% if config.theme.language == 'zh' %}DIC_kwDON30vt84Cm3Z7{% else %}DIC_kwDOCJszZc4CS53G{% endif %}",
      "data-mapping": "specific",
      "data-term": "{{ pageID }}",
      "data-strict": "1",
      "data-reactions-enabled": "1",
      "data-emit-metadata": "0",
      "data-input-position": "top",
      "data-theme": commentsTheme,
      "data-lang": "{% if config.theme.language == 'zh' %}zh-CN{% else %}en-US{% endif %}",
      "data-loading": "lazy",
    }).forEach(e => comments.setAttribute(e[0], e[1]));

    document.getElementById('__comments_script').replaceWith(comments);
  }
  update();
  var observer = new MutationObserver(update);
  observer.observe(document.body, { attributes: true });
</script>